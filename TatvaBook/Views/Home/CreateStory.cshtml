@model TatvaBook.Entities.ViewModels.StoryViewModel

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title> Registration Page</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" rel="stylesheet" />
    <link href="~/css/Login.css" type="text/css" rel="stylesheet">
</head>
<body>
    <h1>Create Story</h1>

    <form asp-action="CreateStory" method="post" enctype="multipart/form-data">
       @* <div>
            <label for="Content" class="mt-3">Content:</label>
            <input type="text" id="Content" name="Content" required>
        </div>*@
        <div class="form-group mt-3">
            <label class="my-3" asp-for="UploadedFiles">Upload Your Photos</label>
            <input type="file" asp-for="UploadedFiles" id="upload-img" /> @*accept = 'Image/*'*@

            <div class="img-thumbs img-thumbs-hidden" id="img-preview"></div>

        </div>
       @* <div>
            <label for="Caption" class="mt-3">Caption:</label>
            <input type="text" id="Caption" name="Caption" required>
        </div>*@

        @*<div>
            <label for="ExpirationTime">Expiration Time:</label>
            <input type="datetime-local" id="ExpirationTime" name="ExpirationTime" required>
          </div>*@

        <div>
            <input type="submit" class="btn btn-success mt-3" value="Create">
        </div>



    </form>
</body>
</html>

<script>

    var imgUpload = document.getElementById('upload-img')
                   , imgPreview = document.getElementById('img-preview')
                   , imgUploadForm = document.getElementById('form-upload')
                   , totalFiles
                   , previewTitle
                   , previewTitleText
                   , img;

                 imgUpload.addEventListener('change', previewImgs, true);

                 function previewImgs(event) {
                   totalFiles = imgUpload.files.length;

                      if(!!totalFiles) {
                     imgPreview.classList.remove('img-thumbs-hidden');
                   }

                   for(var i = 0; i < totalFiles; i++) {
                     wrapper = document.createElement('div');
                     wrapper.classList.add('wrapper-thumb', 'p-3');
                     removeBtn = document.createElement("span");
                     nodeRemove= document.createTextNode('x');
                     removeBtn.classList.add('remove-btn');
                     wrapper.appendChild(removeBtn);
                     removeBtn.appendChild(nodeRemove);
                     img = document.createElement('img');
                     img.src = URL.createObjectURL(event.target.files[i]);
                     img.classList.add('img-preview-thumb' , 'w-100', 'py-3');
                     wrapper.appendChild(img);
                     imgPreview.appendChild(wrapper);

                     $('.remove-btn').click(function(){
                       $(this).parent('.wrapper-thumb').remove();
                     });
                   }
                 }
</script>